<%#
name: insights
description: |-
  Installs and registers the insights client on RHEL, typically used
  in the Kickstart provisioning and host init templates.
snippet: true
model: ProvisioningTemplate
organizations:
- Default Organization
locations:
- Default Location
-%>
<% if @host.operatingsystem.name == 'RedHat' -%>
echo '#'
echo '# Installing Insights client'
echo '#'

yum install -y insights-client
insights-client --test-connection
insights-client --register

<% end -%>
